<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Join LakshyaAI - Sign In or Create Account</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { 'inter': ['Inter', 'sans-serif'] }
                }
            }
        }
    </script>
    <style>
        .floating-orb {
            animation: float 8s ease-in-out infinite;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px) rotate(0deg);
            }

            25% {
                transform: translateY(-30px) rotate(90deg);
            }

            50% {
                transform: translateY(-10px) rotate(180deg);
            }

            75% {
                transform: translateY(-20px) rotate(270deg);
            }
        }

        .form-input:focus {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.2);
        }

        .auth-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 20px 40px rgba(59, 130, 246, 0.3);
        }

        /* Fix for scrolling issue */
        body {
            overflow-y: auto !important;
            overflow-x: hidden;
        }

        .main-container {
            min-height: calc(100vh - 4rem);
            padding-top: 6rem;
            padding-bottom: 2rem;
        }

        .auth-container {
            margin: 0 auto;
        }

        /* Ensure mobile compatibility */
        @media (max-width: 640px) {
            .main-container {
                padding-top: 5rem;
                padding-bottom: 1rem;
            }

            .auth-container {
                margin: 1rem;
                padding: 1.5rem;
            }

            .grid-cols-2 {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
        }
    </style>
</head>

<body class="font-inter bg-slate-950 text-white">

    <!-- Background -->
    <div class="fixed inset-0 z-0">
        <div class="absolute inset-0 bg-gradient-to-br from-slate-950 via-slate-900 to-slate-800"></div>
        <div class="absolute inset-0 overflow-hidden pointer-events-none">
            <div
                class="floating-orb absolute top-20 left-10 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl animate-pulse">
            </div>
            <div class="floating-orb absolute top-40 right-20 w-64 h-64 bg-purple-500/10 rounded-full blur-3xl animate-pulse"
                style="animation-delay: 2s;"></div>
            <div class="floating-orb absolute bottom-20 left-1/4 w-48 h-48 bg-pink-500/10 rounded-full blur-3xl animate-pulse"
                style="animation-delay: 4s;"></div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 bg-slate-950/80 backdrop-blur-xl border-b border-slate-800/50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <a href="/" class="flex items-center space-x-3 group">
                    <div
                        class="w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform">
                        <i class="fas fa-rocket text-white text-sm"></i>
                    </div>
                    <span
                        class="text-xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent">LakshyaAI</span>
                </a>
                <a href="/" class="flex items-center space-x-2 text-slate-300 hover:text-white transition-colors group">
                    <i class="fas fa-arrow-left group-hover:-translate-x-1 transition-transform"></i>
                    <span>Back to Home</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="relative z-10 main-container px-4 sm:px-6 lg:px-8">
        <div class="max-w-md w-full mx-auto">

            <!-- Auth Container -->
            <div class="auth-container bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8 shadow-2xl">

                <!-- Header -->
                <div class="text-center mb-8">
                    <div
                        class="w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg">
                        <i class="fas fa-user-astronaut text-white text-2xl"></i>
                    </div>
                    <h1 id="auth-title" class="text-3xl font-bold mb-2">Welcome Back!</h1>
                    <p id="auth-subtitle" class="text-slate-300">Sign in to continue your career journey</p>
                </div>

                <!-- Tab Switcher -->
                <div class="flex bg-slate-800/50 rounded-2xl p-1 mb-8">
                    <button id="login-tab"
                        class="flex-1 py-3 px-6 rounded-xl font-semibold transition-all duration-300 bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg">
                        Sign In
                    </button>
                    <button id="register-tab"
                        class="flex-1 py-3 px-6 rounded-xl font-semibold transition-all duration-300 text-slate-300 hover:text-white">
                        Sign Up
                    </button>
                </div>

                <!-- Login Form -->
                <form id="login-form" class="space-y-6">
                    <div class="form-group">
                        <label class="block text-sm font-medium text-slate-300 mb-2">
                            <i class="fas fa-envelope mr-2"></i>Email Address
                        </label>
                        <input type="email" id="login-email" required
                            class="form-input w-full px-4 py-3 bg-slate-800/50 border border-slate-700 rounded-xl text-white placeholder-slate-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all"
                            placeholder="Enter your email">
                    </div>

                    <div class="form-group">
                        <label class="block text-sm font-medium text-slate-300 mb-2">
                            <i class="fas fa-lock mr-2"></i>Password
                        </label>
                        <div class="relative">
                            <input type="password" id="login-password" required
                                class="form-input w-full px-4 py-3 bg-slate-800/50 border border-slate-700 rounded-xl text-white placeholder-slate-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all pr-12"
                                placeholder="Enter your password">
                            <button type="button"
                                class="password-toggle absolute right-4 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-white transition-colors">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>

                    <div class="flex items-center justify-between">
                        <label class="flex items-center">
                            <input type="checkbox" class="rounded border-slate-600 bg-slate-800 text-blue-500">
                            <span class="ml-2 text-sm text-slate-300">Remember me</span>
                        </label>
                        <a href="#" class="text-sm text-blue-400 hover:text-blue-300 transition-colors">Forgot
                            password?</a>
                    </div>

                    <button type="submit"
                        class="auth-btn w-full py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold rounded-xl transition-all duration-300 flex items-center justify-center">
                        <span>Sign In</span>
                        <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </form>

                <!-- Register Form -->
                <form id="register-form" class="space-y-6 hidden">
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-slate-300 mb-2">
                                <i class="fas fa-user mr-2"></i>First Name
                            </label>
                            <input type="text" name="firstName" placeholder="First name" required
                                class="form-input w-full px-4 py-3 bg-slate-800/50 border border-slate-700 rounded-xl text-white placeholder-slate-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-300 mb-2">
                                <i class="fas fa-user mr-2"></i>Last Name
                            </label>
                            <input type="text" name="lastName" placeholder="Last name" required
                                class="form-input w-full px-4 py-3 bg-slate-800/50 border border-slate-700 rounded-xl text-white placeholder-slate-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all">
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-slate-300 mb-2">
                            <i class="fas fa-envelope mr-2"></i>Email Address
                        </label>
                        <input type="email" name="email" placeholder="Enter your email" required
                            class="form-input w-full px-4 py-3 bg-slate-800/50 border border-slate-700 rounded-xl text-white placeholder-slate-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-slate-300 mb-2">
                            <i class="fas fa-phone mr-2"></i>Phone Number
                        </label>
                        <div class="flex">
                            <select name="countryCode"
                                class="px-3 py-3 bg-slate-800/50 border border-slate-700 rounded-l-xl text-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all">
                                <option value="+91">+91</option>
                                <option value="+1">+1</option>
                                <option value="+44">+44</option>
                            </select>
                            <input type="tel" name="phone" placeholder="Enter phone number" required
                                class="form-input flex-1 px-4 py-3 bg-slate-800/50 border border-slate-700 border-l-0 rounded-r-xl text-white placeholder-slate-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all">
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-slate-300 mb-2">
                            <i class="fas fa-lock mr-2"></i>Password
                        </label>
                        <div class="relative">
                            <input type="password" name="password" placeholder="Create a strong password" required
                                class="form-input w-full px-4 py-3 bg-slate-800/50 border border-slate-700 rounded-xl text-white placeholder-slate-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all pr-12">
                            <button type="button"
                                class="password-toggle absolute right-4 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-white transition-colors">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-slate-300 mb-2">
                            <i class="fas fa-briefcase mr-2"></i>Current Status
                        </label>
                        <select name="currentStatus" required
                            class="form-input w-full px-4 py-3 bg-slate-800/50 border border-slate-700 rounded-xl text-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all">
                            <option value="">Select your current status</option>
                            <option value="student">Student</option>
                            <option value="graduate">Recent Graduate</option>
                            <option value="unemployed">Unemployed</option>
                            <option value="employed">Currently Employed</option>
                            <option value="freelancer">Freelancer</option>
                        </select>
                    </div>

                    <label class="flex items-start">
                        <input type="checkbox" name="acceptTerms" required
                            class="mt-1 rounded border-slate-600 bg-slate-800 text-blue-500 focus:ring-blue-500 focus:ring-offset-0">
                        <span class="ml-3 text-sm text-slate-300">
                            I agree to the <a href="#" class="text-blue-400 hover:text-blue-300 transition-colors">Terms
                                of Service</a>
                            and <a href="#" class="text-blue-400 hover:text-blue-300 transition-colors">Privacy
                                Policy</a>
                        </span>
                    </label>

                    <button type="submit"
                        class="auth-btn w-full py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold rounded-xl transition-all duration-300 flex items-center justify-center">
                        <span>Create Account</span>
                        <i class="fas fa-rocket ml-2"></i>
                    </button>
                </form>

                <!-- Social Login -->
                <div class="mt-8">
                    <div class="relative">
                        <div class="absolute inset-0 flex items-center">
                            <div class="w-full border-t border-slate-700"></div>
                        </div>
                        <div class="relative flex justify-center text-sm">
                            <span class="px-4 bg-slate-950 text-slate-400">Or continue with</span>
                        </div>
                    </div>
                    <div class="mt-6 grid grid-cols-3 gap-3">
                        <button type="button"
                            class="flex justify-center items-center px-4 py-3 bg-slate-800/50 border border-slate-700 rounded-xl hover:bg-slate-700/50 transition-all">
                            <i class="fab fa-google text-red-400 text-xl"></i>
                        </button>
                        <button type="button"
                            class="flex justify-center items-center px-4 py-3 bg-slate-800/50 border border-slate-700 rounded-xl hover:bg-slate-700/50 transition-all">
                            <i class="fab fa-linkedin text-blue-400 text-xl"></i>
                        </button>
                        <button type="button"
                            class="flex justify-center items-center px-4 py-3 bg-slate-800/50 border border-slate-700 rounded-xl hover:bg-slate-700/50 transition-all">
                            <i class="fab fa-github text-gray-400 text-xl"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Additional Info -->
            <div class="mt-8 text-center pb-8">
                <p class="text-slate-400 text-sm mb-4">
                    🔒 Your data is protected with industry-standard encryption
                </p>
                <div class="flex justify-center items-center space-x-6">
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-shield-alt text-green-400"></i>
                        <span class="text-sm text-slate-300">SSL Secured</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-user-shield text-blue-400"></i>
                        <span class="text-sm text-slate-300">GDPR Compliant</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        class AuthPage {
            constructor() {
                this.currentTab = 'login';
                this.init();
            }

            init() {
                this.setupTabSwitching();
                this.setupPasswordToggle();
                this.setupFormSubmission();
                this.setupSmoothScrolling();
                console.log('✅ Auth page initialized with scroll support');
            }

            setupTabSwitching() {
                document.getElementById('login-tab').addEventListener('click', () => this.switchToLogin());
                document.getElementById('register-tab').addEventListener('click', () => this.switchToRegister());
            }

            switchToLogin() {
                if (this.currentTab === 'login') return;
                this.currentTab = 'login';

                const loginTab = document.getElementById('login-tab');
                const registerTab = document.getElementById('register-tab');
                const loginForm = document.getElementById('login-form');
                const registerForm = document.getElementById('register-form');
                const authTitle = document.getElementById('auth-title');
                const authSubtitle = document.getElementById('auth-subtitle');

                loginTab.className = 'flex-1 py-3 px-6 rounded-xl font-semibold transition-all duration-300 bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg';
                registerTab.className = 'flex-1 py-3 px-6 rounded-xl font-semibold transition-all duration-300 text-slate-300 hover:text-white';

                authTitle.textContent = 'Welcome Back!';
                authSubtitle.textContent = 'Sign in to continue your career journey';

                registerForm.classList.add('hidden');
                loginForm.classList.remove('hidden');

                // Scroll to top when switching
                this.scrollToTop();
            }

            switchToRegister() {
                if (this.currentTab === 'register') return;
                this.currentTab = 'register';

                const loginTab = document.getElementById('login-tab');
                const registerTab = document.getElementById('register-tab');
                const loginForm = document.getElementById('login-form');
                const registerForm = document.getElementById('register-form');
                const authTitle = document.getElementById('auth-title');
                const authSubtitle = document.getElementById('auth-subtitle');

                registerTab.className = 'flex-1 py-3 px-6 rounded-xl font-semibold transition-all duration-300 bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg';
                loginTab.className = 'flex-1 py-3 px-6 rounded-xl font-semibold transition-all duration-300 text-slate-300 hover:text-white';

                authTitle.textContent = 'Join LakshyaAI!';
                authSubtitle.textContent = 'Create account to start your career transformation';

                loginForm.classList.add('hidden');
                registerForm.classList.remove('hidden');

                // Scroll to top when switching
                this.scrollToTop();
            }

            scrollToTop() {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            }

            setupSmoothScrolling() {
                // Ensure smooth scrolling is enabled
                document.documentElement.style.scrollBehavior = 'smooth';
            }

            setupPasswordToggle() {
                document.querySelectorAll('.password-toggle').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.preventDefault();
                        const input = btn.previousElementSibling;
                        const icon = btn.querySelector('i');

                        if (input.type === 'password') {
                            input.type = 'text';
                            icon.className = 'fas fa-eye-slash';
                        } else {
                            input.type = 'password';
                            icon.className = 'fas fa-eye';
                        }
                    });
                });
            }

            setupFormSubmission() {
                document.getElementById('login-form').addEventListener('submit', async (e) => {
                    e.preventDefault();

                    const email = document.getElementById('login-email').value;
                    const password = document.getElementById('login-password').value;

                    try {
                        const response = await fetch('/api/auth/login', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({ email, password })
                        });

                        const result = await response.json();

                        if (response.ok) {
                            this.showAlert('🎉 Login successful! Redirecting...', 'success');
                            setTimeout(() => {
                                window.location.href = '/dashboard';
                            }, 1500);
                        } else {
                            this.showAlert(result.message || 'Login failed', 'error');
                        }
                    } catch (error) {
                        this.showAlert('Network error. Please try again.', 'error');
                    }
                });

                document.getElementById('register-form').addEventListener('submit', async (e) => {
                    e.preventDefault();

                    const formData = new FormData(e.target);
                    const data = Object.fromEntries(formData);

                    try {
                        const response = await fetch('/api/auth/register', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(data)
                        });

                        const result = await response.json();

                        if (response.ok) {
                            this.showAlert('🚀 Registration successful! Please login.', 'success');
                            setTimeout(() => {
                                this.switchToLogin();
                            }, 1500);
                        } else {
                            this.showAlert(result.message || 'Registration failed', 'error');
                        }
                    } catch (error) {
                        this.showAlert('Network error. Please try again.', 'error');
                    }
                });
            }

            showAlert(message, type = 'info') {
                const alert = document.createElement('div');
                alert.className = `fixed top-20 right-4 z-50 p-4 rounded-xl text-white max-w-sm ${type === 'success' ? 'bg-green-500/90' :
                        type === 'error' ? 'bg-red-500/90' :
                            'bg-blue-500/90'
                    } backdrop-blur-sm border border-white/20 shadow-lg`;

                alert.innerHTML = `
                    <div class="flex items-center justify-between">
                        <span>${message}</span>
                        <button onclick="this.parentElement.parentElement.remove()" class="ml-3 text-white/80 hover:text-white">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                `;

                document.body.appendChild(alert);
                setTimeout(() => { if (alert.parentNode) alert.remove(); }, 5000);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            new AuthPage();
        });
    </script>
</body>

</html>